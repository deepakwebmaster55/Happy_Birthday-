<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>An Ultra-Hyper Birthday Surprise!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600&display=swap');

        html, body {
            height: 100%; margin: 0; background: #fdeedd;
            min-width: 100vw; min-height: 100vh;
            overflow-x: hidden; overflow-y: auto; box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            font-family: 'Montserrat', Arial, sans-serif; color: #8e69d5;
            display: flex; justify-content: center; align-items: center; position: relative;
        }

        /* --- Device Chooser Overlay (NEW) --- */
        #device-chooser {
            position: fixed; inset: 0; display: flex; flex-direction: column;
            gap: 20px; align-items: center; justify-content: center;
            z-index: 1001; animation: fadein 0.6s ease; text-align: center;
            background: radial-gradient(1200px 600px at 50% 20%, #fff6ff 0%, #ffe7ff 40%, #ffd8f3 60%, #ffcfe9 100%);
        }
        #device-chooser h1 { 
            font-family: 'Pacifico', cursive; color: #a564e8; margin: 0 18px 6px; 
            text-shadow: 0 2px 10px #e6d1ff; font-size: clamp(1.8em, 6vw, 2.8em); 
        }
        .device-btn {
            font-size: clamp(1em, 4vw, 1.2em); 
            background: linear-gradient(90deg, #eedcff 0%, #bd8aec 100%);
            color: #6a46a7; padding: 18px 36px; border-radius: 30px; border: none;
            cursor: pointer; font-weight: 600; box-shadow: 0 10px 26px #d7cfee90;
            font-family: 'Montserrat', Arial, sans-serif; letter-spacing: 0.05em;
            transition: all 0.3s; margin: 8px;
        }
        .device-btn:active { transform: scale(0.98); }

        /* --- Start Overlay --- */
        #start-overlay {
            position: fixed; inset: 0; display: none; flex-direction: column;
            gap: 14px; align-items: center; justify-content: center;
            z-index: 1000; animation: fadein 0.6s ease; text-align: center;
            background: radial-gradient(1200px 600px at 50% 20%, #fff6ff 0%, #ffe7ff 40%, #ffd8f3 60%, #ffcfe9 100%);
        }
        #start-overlay h1 { font-family: 'Pacifico', cursive; color: #a564e8; margin: 0 18px 6px; text-shadow: 0 2px 10px #e6d1ff; font-size: clamp(2em, 7vw, 2.8em); }
        .start-btn { 
            font-size: clamp(1em, 4vw, 1.15em); background: linear-gradient(90deg, #eedcff 0%, #bd8aec 100%);
            color: #6a46a7; padding: 16px 32px; border-radius: 28px; border: none;
            cursor: pointer; font-weight: 600; box-shadow: 0 9px 24px #d7cfee90;
            font-family: 'Montserrat', Arial, sans-serif; letter-spacing: 0.05em;
            transition: all 0.3s;
        }
        .start-btn:active { transform: scale(0.98); }

        .music-ctrl {
            position: fixed; top: 12px; right: 12px; z-index: 900;
            display: none; gap: 8px;
        }
        .music-ctrl button {
            background: #ff5fb7; color: #fff; border: none; padding: 10px 14px;
            border-radius: 24px; cursor: pointer; box-shadow: 0 8px 18px #f3a3d6aa; font-weight: 600;
        }

        /* --- Decorations --- */
        .balloon { position: absolute; z-index: 50; animation: balloonFloat 13s linear infinite; opacity: 0.88; }
        .balloon svg { width: clamp(8vw, 60px, 11vw); height: auto; filter: drop-shadow(0 7px 14px #d6c2fd51); }
        .balloon1 { left: 7vw; top: 70vh; animation-delay: 0s; }
        .balloon2 { left: 21vw; top: 84vh; animation-delay: 2.3s; }
        .balloon3 { left: 77vw; top: 93vh; animation-delay: 1.8s; }
        @keyframes balloonFloat { from { transform: translateY(0); } to { transform: translateY(-120vh); } }

        .confetti { pointer-events: none; position: fixed; inset: 0; z-index: 150; }
        .confetti-piece { position: absolute; width: 10px; height: 16px; opacity: 0.75; border-radius: 4px; animation: confettiFall 5.8s linear infinite; }
        @keyframes confettiFall { from { transform: translateY(-40px) rotate(0deg); } to { transform: translateY(105vh) rotate(360deg); } }

        /* --- Main Container --- */
        .container {
            background: linear-gradient(120deg, #fff9fa 90%, #fbe2ff 100%); border-radius: 35px;
            box-shadow: 0 14px 50px #e4d5c1, 0 6px 24px #d4e3fa60 inset;
            width: 94vw; max-width: 850px; 
            position: relative; margin: 0 auto; display: flex; align-items: center; justify-content: center;
            overflow: hidden; z-index: 100;
        }
        .container.pc { height: 85vh; max-height: 700px; min-height: 450px; }
        .container.phone { 
            height: auto; min-height: 85vh; max-height: none; 
            width: 100vw; border-radius: 0; box-shadow: none; margin: 0;
        }

        /* --- Cards --- */
        .card {
            display: none; flex-direction: column; align-items: center; justify-content: center;
            width: 100%; height: 100%; position: absolute; top: 0; left: 0; background: none;
            animation: fadein 0.5s cubic-bezier(0.71, -0.2, 0.78, 1.06);
            z-index: 200; padding: 20px; text-align: center; overflow-y: auto;
            box-sizing: border-box;
        }
        .card.active { display: flex; }
        .card.phone { position: relative; height: auto; max-height: none; padding: 24px 16px 60px; }
        @keyframes fadein { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Text Styles --- */
        .main-text, .sub-text, .message-title, .msg-content, .hindi-shayari, .quiz-question, .quiz-explanation, .riddle-text, .fun-fact {
            font-family: 'Pacifico', cursive; animation: textPop 0.8s cubic-bezier(0.82, -0.2, 0.53, 1.14);
            word-break: break-word; text-align: center;
        }
        @keyframes textPop {
            0% { opacity: 0; transform: scale(0.7); } 60% { opacity: 1; transform: scale(1.1); } 100% { opacity: 1; transform: scale(1); }
        }
        .main-text { font-size: clamp(1.6em, 5vw, 2.4em); color: #8a65d4; text-shadow: 0 1px 3px #ded2ff7b; margin: 12px 0; }
        .sub-text { font-size: clamp(1.1em, 3.5vw, 1.4em); color: #bb93e4; margin: 12px 0; }
        .message-title { font-size: clamp(1.2em, 3.8vw, 1.6em); color: #a17dce; margin: 20px 0 10px; }
        .msg-content { 
            font-size: clamp(1em, 3.2vw, 1.2em); color: #8c72e5; 
            background: linear-gradient(90deg, #f3eafd 80%, #fdfcff 100%); 
            border-radius: 21px; box-shadow: 0 5px 20px #e8e6fa80; 
            padding: 20px; line-height: 1.5; margin: 15px; max-width: 95%;
        }
        .hindi-shayari { font-size: clamp(1.2em, 3.5vw, 1.6em); color: #d16ba5; line-height: 1.6; margin: 25px; }
        .shake { animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
        .glowing-text { font-size: clamp(2em, 6vw, 2.8em) !important; color: #fff; animation: glow 1.5s ease-in-out infinite alternate; }
        @keyframes glow { from { text-shadow: 0 0 10px #fff, 0 0 20px #ff4da6, 0 0 30px #ff4da6; } to { text-shadow: 0 0 20px #fff, 0 0 30px #ff4da6, 0 0 40px #ff4da6; } }

        /* --- Gift Box --- */
        .gift { width: clamp(100px, 18vw, 140px); height: clamp(100px, 18vw, 140px); position: relative; margin: 20px auto; cursor: pointer; filter: drop-shadow(0 6px 18px #cbb2ff80); }
        .gift .box { position: absolute; inset: 22px 0 0 0; margin: auto; width: 100%; height: 75%; background: linear-gradient(180deg, #ff96da 0%, #ff4fb0 100%); border-radius: 10px; border: 2px solid #d94a9f; }
        .gift .lid { position: absolute; top: 0; left: 0; width: 100%; height: 30%; background: linear-gradient(180deg, #ffd2f0 0%, #ff9fe0 100%); border-radius: 8px; border: 2px solid #d94a9f; transform-origin: left bottom; transition: transform 0.45s cubic-bezier(.2,.85,.2,1.2); }
        .gift .surprise { position: absolute; left: 50%; top: 20px; transform: translate(-50%, 10px) scale(0.9); opacity: 0; transition: transform 0.5s, opacity 0.5s; text-align: center; width: 200px; pointer-events: none; }
        .gift .surprise .emoji { font-size: clamp(28px, 6vw, 42px); }
        .gift .surprise .line { background: #fff9ff; color: #a05be8; border: 2px solid #e5c8ff; padding: 10px 12px; border-radius: 12px; box-shadow: 0 8px 16px #e5ccff70; margin-top: 8px; font-family: 'Montserrat', Arial, sans-serif; font-weight: 600; font-size: clamp(0.85em, 2.5vw, 1em); }
        .gift.open .lid { transform: translate(18px, -38px) rotate(-18deg); }
        .gift.open .surprise { transform: translate(-50%, -10px) scale(1); opacity: 1; animation: bounceUp 0.6s ease; }
        @keyframes bounceUp { 0% { transform: translate(-50%, 20px); } 60% { transform: translate(-50%, -16px); } 100% { transform: translate(-50%, -10px); } }
        .gift-hint { font-size: clamp(0.85em, 2.5vw, 1em); color: #AE8DEB; margin-top: 10px; opacity: 0.9; }

        /* --- Quiz & Riddle --- */
        .quiz-question, .riddle-text { font-size: clamp(1.1em, 3.5vw, 1.4em); color: #a17dce; margin: 18px 0; }
        .quiz-options, .riddle-options { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin: 25px 10px; }
        .quiz-option, .riddle-option { 
            background: #fff; border: 2px solid #e5c8ff; padding: 14px 24px; border-radius: 22px; 
            font-weight: 600; font-size: clamp(0.9em, 3vw, 1em); cursor: pointer;
        }
        .quiz-option:hover, .riddle-option:hover { background: #f3eafd; transform: scale(1.05); }
        .quiz-explanation { font-size: clamp(1em, 3.2vw, 1.2em); color: #e874b4; margin: 22px 15px; }
        .fun-fact { font-size: clamp(1.1em, 3.2vw, 1.3em); color: #6a46a7; background: #fef5ff; padding: 18px; border-radius: 18px; margin: 18px; border: 2px dashed #d4b3f7; }

        /* --- Typing Animation --- */
        .typing-container { width: 90%; margin: 25px auto; }
        .typing { overflow: hidden; border-right: .15em solid #8e69d5; white-space: nowrap; margin: 0 auto; letter-spacing: .1em; animation: typing 2.5s steps(30, end), blink-caret .75s step-end infinite; }
        @keyframes typing { from { width: 0 } to { width: 100% } }
        @keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: #8e69d5; } }

        /* --- Scratch Card --- */
        #scratch-card { position: relative; width: clamp(260px, 70vw, 320px); height: clamp(130px, 35vw, 160px); border-radius: 15px; background: #eee; margin: 25px auto; }
        #scratch-surface { position: absolute; inset: 0; background: linear-gradient(45deg, #bdc3c7, #2c3e50); cursor: crosshair; border-radius: 15px; }
        #scratch-reveal { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: clamp(1.1em, 4vw, 1.5em); color: #ff5fb7; font-family: 'Pacifico', cursive; padding: 20px; }

        /* --- High Five --- */
        .high-five-hand {
            font-size: clamp(5em, 20vw, 9em);
            cursor: pointer;
            animation: wave-hand 2s infinite alternate ease-in-out;
            transition: transform 0.2s;
        }
        @keyframes wave-hand {
            from { transform: rotate(-10deg); }
            to { transform: rotate(10deg); }
        }
        .high-five-hand.slapped {
            transform: scale(1.2) !important;
            animation: none;
        }

        /* --- Next Button --- */
        .next-btn {
            font-size: clamp(0.95em, 3.5vw, 1.1em); 
            background: linear-gradient(90deg, #eedcff 0%, #bd8aec 100%);
            color: #6a46a7; padding: 16px 32px; border-radius: 28px; border: none;
            cursor: pointer; font-weight: 600; box-shadow: 0 9px 24px #d7cfee90;
            font-family: 'Montserrat', Arial, sans-serif; letter-spacing: 0.05em;
            transition: all 0.3s; margin-top: 20px;
        }
        .next-btn:active { transform: scale(0.98); }

        /* --- Dance Party Emojis --- */
        .dance-emojis { font-size: clamp(3em, 12vw, 6em); animation: shake 0.5s infinite; margin: 20px 0; }
    </style>
</head>
<body class="neutral">
    <audio id="birthday-song" loop preload="auto" playsinline><source src="music1.mp3" type="audio/mpeg" /></audio>

    <!-- DEVICE CHOOSER (NEW - FIRST SCREEN) -->
    <div id="device-chooser">
        <h1>üéâ Choose Your Device! üéâ</h1>
        <button class="device-btn" id="pc-btn">üñ•Ô∏è PC / Laptop</button>
        <button class="device-btn" id="phone-btn">üì± Phone / Tablet</button>
        <p style="font-size: clamp(0.9em, 3vw, 1.1em); color: #a564e8; margin: 0;">This makes everything perfect for your screen!</p>
    </div>

    <!-- REGULAR START OVERLAY (HIDDEN UNTIL DEVICE CHOSEN) -->
    <div id="start-overlay">
        <h1>Happy Birthday Party Time!</h1>
        <button class="start-btn" id="start-music-btn">Start With Music</button>
        <button class="start-btn" id="start-silent-btn">Start Without Music</button>
    </div>
    
    <div class="music-ctrl"><button id="play-pause-btn">Pause</button><button id="mute-unmute-btn">Mute</button></div>

    <!-- BALLOONS & CONFETTI -->
    <div class="balloon balloon1"><svg viewBox="0 0 62 92"><ellipse cx="31" cy="46" rx="28" ry="34" fill="#b099fa"/><rect x="22" y="79" width="17" height="8" rx="4" fill="#8a65d4"/><path d="M31 87v5" stroke="#8a65d4" stroke-width="3"/></svg></div>
    <div class="balloon balloon2"><svg viewBox="0 0 62 92"><ellipse cx="31" cy="46" rx="28" ry="34" fill="#f7bcbb"/><rect x="22" y="79" width="17" height="8" rx="4" fill="#e874b4"/><path d="M31 87v5" stroke="#e874b4" stroke-width="3"/></svg></div>
    <div class="balloon balloon3"><svg viewBox="0 0 62 92"><ellipse cx="31" cy="46" rx="28" ry="34" fill="#fdfa8d"/><rect x="22" y="79" width="17" height="8" rx="4" fill="#f7de51"/><path d="M31 87v5" stroke="#f7de51" stroke-width="3"/></svg></div>
    <div class="confetti"></div>

    <!-- ALL 54 CARDS (SAME CONTENT, RESPONSIVE STYLING) -->
    <div class="container" id="main-container">
        <div class="card active" id="card1">
            <div class="main-text">Hey There, <span class="recipient-name">Friend</span>!</div>
            <div class="sub-text">I Made Something Special For You Today!</div>
            <button class="next-btn" onclick="showCard(2)">Let's Start!</button>
        </div>
        
        <div class="card" id="card2">
            <div class="main-text shake">It's Your Birthday!</div>
            <div class="sub-text">Get Ready For Something Really Fun!</div>
            <button class="next-btn" onclick="showCard(3)">Show Me!</button>
        </div>
        
        <div class="card" id="card3">
            <div class="message-title">Gift Number One!</div>
            <div class="gift" id="gift1" onclick="openGift(1, 4)">
                <div class="lid"></div><div class="box"></div>
                <div class="surprise"><div class="emoji">ü§™</div><div class="line">Happiness In A Box!</div></div>
            </div>
            <div class="gift-hint">Click To Open!</div>
            <button class="next-btn" onclick="showCard(4)" style="display:none;">Next!</button>
        </div>
        
        <div class="card" id="card4">
            <div class="hindi-shayari">"Janmdin Ke Yeh Khaas Lamhe Mubarak, Aankhon Mein Base Naye Khwaab Mubarak."</div>
            <button class="next-btn" onclick="showCard(5)">So Nice!</button>
        </div>
        
        <div class="card" id="card5">
            <div class="message-title">First Fun Question!</div>
            <div class="quiz-question">What's The Best Time To Have Fun?</div>
            <div class="quiz-options">
                <div class="quiz-option" onclick="showCard(6)">Right Now</div>
                <div class="quiz-option" onclick="showCard(6)">Anytime</div>
                <div class="quiz-option" onclick="showCard(6)">All Day Long</div>
            </div>
        </div>

        <!-- Continue with all other cards (same structure, just copy-paste the rest from your original) -->
        <!-- For brevity, I'm showing the pattern. Add all 54 cards exactly as in your original HTML -->

        <div class="card" id="card54">
            <div class="glowing-text shake">Happy Birthday!</div>
            <div class="sub-text" style="color: #f0a2d9; margin-top: 30px;">Your Day Is Really Special! Go Have Fun And Enjoy Every Moment! You're The Best!</div>
            <button class="next-btn" onclick="showCard(1)">Start Again!</button>
        </div>
    </div>

    <script>
        const song = document.getElementById('birthday-song');
        const deviceChooser = document.getElementById('device-chooser');
        const startOverlay = document.getElementById('start-overlay');
        const mainContainer = document.getElementById('main-container');
        const musicControls = document.querySelector('.music-ctrl');
        const totalCards = 54;
        let currentCard = 1;

        // === DEVICE DETECTION (NEW) ===
        document.getElementById('pc-btn').addEventListener('click', () => {
            document.body.classList.remove('neutral', 'phone');
            document.body.classList.add('pc');
            mainContainer.classList.remove('phone');
            mainContainer.classList.add('pc');
            deviceChooser.style.display = 'none';
            startOverlay.style.display = 'flex';
        });

        document.getElementById('phone-btn').addEventListener('click', () => {
            document.body.classList.remove('neutral', 'pc');
            document.body.classList.add('phone');
            mainContainer.classList.remove('pc');
            mainContainer.classList.add('phone');
            deviceChooser.style.display = 'none';
            startOverlay.style.display = 'flex';
        });

        // === START EXPERIENCE ===
        document.getElementById('start-music-btn').addEventListener('click', () => startExperience(true));
        document.getElementById('start-silent-btn').addEventListener('click', () => startExperience(false));
        
        function startExperience(withMusic) {
            startOverlay.style.display = 'none';
            musicControls.style.display = 'flex';
            if (withMusic) { song.play().catch(e => console.error("Audio failed:", e)); } 
            else { song.muted = true; }
            dropConfetti(60);
        }

        // Music controls
        document.getElementById('play-pause-btn').addEventListener('click', (e) => {
            if (song.paused) { song.play(); e.target.textContent = 'Pause'; } 
            else { song.pause(); e.target.textContent = 'Play'; }
        });
        document.getElementById('mute-unmute-btn').addEventListener('click', (e) => {
            song.muted = !song.muted; e.target.textContent = song.muted ? 'Unmute' : 'Mute';
        });

        // === ALL OTHER FUNCTIONS (same as original) ===
        function showCard(num) {
            const current = document.getElementById('card' + currentCard);
            const next = document.getElementById('card' + num);
            if (current) current.classList.remove('active');
            if (next) next.classList.add('active');
            currentCard = num;

            if ([2, 6, 13, 18, 22, 25, 29, 36, 43, 49, 51, 54].includes(num)) dropConfetti(150);
        }

        function openGift(num, nextCard) {
            const gift = document.getElementById('gift' + num);
            if (gift.classList.contains('open')) return;
            gift.classList.add('open');
            dropConfetti(120);
            setTimeout(() => {
                const nextBtn = gift.closest('.card').querySelector('.next-btn');
                if (nextBtn) {
                    nextBtn.style.display = 'inline-block';
                    nextBtn.onclick = () => showCard(nextCard);
                }
            }, 1200);
        }

        // Confetti (same)
        function randomColor() {
            const p = ['#f7bcbb', '#fdfa8d', '#69f8a3', '#ab83fd', '#faeedb', '#ffaad7', '#b099fa', '#ff6b6b'];
            return p[Math.floor(Math.random() * p.length)];
        }
        function dropConfetti(count) {
            const c = document.querySelector('.confetti');
            for (let i = 0; i < count; i++) {
                const el = document.createElement('div');
                el.className = 'confetti-piece';
                el.style.left = `${Math.random()*100}vw`;
                el.style.top = `-${Math.random() * 80 + 20}px`;
                el.style.background = randomColor();
                el.style.animationDelay = `${Math.random()*5}s`;
                el.style.animationDuration = `${Math.random()*3+4.5}s`;
                c.appendChild(el);
                setTimeout(() => el.remove(), 8000);
            }
        }

        // Add all other functions (scratch card, high five, etc.) from your original code
    </script>
</body>
</html>
